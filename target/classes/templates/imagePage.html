<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head lang="en">
        <meta charset="UTF-8" />
        <title>Galleria</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
        <link href="/styles.css" rel="stylesheet" />
    </head>
    <body>
        <h1>Galleriassa on (<span th:text="${count}">count</span> kuvaa)</h1>
        <div class="container">
            <div id="messages" class="hide" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <div id="messages_content"></div>
            </div>
            <div class="row">
                <div class="col-10" th:if="${previous != null}">
                    <a th:href="@{/kayttajat/} + ${account.username} +'/albumi/'+ ${previous}">Edellinen</a>
                </div>
                <div class="col-1" th:if="${next != null}">
                    <a th:href="@{/kayttajat/} + ${account.username} +'/albumi/'+ ${next}">Seuraava</a>
                </div>
            </div>
            <div class ="row" th:src="${imageContent}">
                <img  style='height: 600px; width: 100%; object-fit:fill ' name="kuva" id="singleImage" th:src="*{'data:image/jpg;base64,'+imageContent}" alt="#" />
                <script th:inline="javascript">
                    /*<![CDATA[*/

                    var message = /*[[${account.username}]]*/ 'default';

                    /*]]>*/
                </script>
                <script th:inline="javascript"> var contextRoot = /*[[@{/}]]*/ '';</script>
                <script th:src="@{/javascript/code.js}" defer></script>
            </div>
            <br/>
            <div class="row">
                <div class="col-10">
                    <form  id="form" th:if="${account.username}==${currentUser}">
                        <input type="submit" onclick="addProfilePic()" value="Lisää profiilikuvaksi" class="btn btn-primary" />
                    </form>
                </div>
                <script src="https://code.jquery.com/jquery.js"></script>
                <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
                <script>
                    $('#form').submit(function(e) {
                    $('#messages').removeClass('hide').addClass('alert alert-success alert-dismissible').slideDown().show();
                    $('#messages_content').html('<h4>Profiilikuva lisätty</h4>');
                    $('#modal').modal('show');
                    e.preventDefault();
                    });
                </script>
                <div class="col-1">
                    <form method="GET" th:action="@{'/kayttajat/' +${account.username}}">
                        <input type="submit" value="Takaisin profiiliin" class="btn btn-primary"/>
                    </form>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <form th:if="${account.username}==${currentUser}" th:method="DELETE" th:action="@{/kayttajat/} + ${account.username} + '/albumi/' +${imageId}">
                        <input  type="submit" value="Poista" class="btn btn-danger"/>
                    </form>
                </div>
            </div>
        </div>
    </body>
</html>   